00003 Apr06'20-22:20:04 stockpile 8.8
TOPIC: ~control 0x19 -1654582761 2 0 1311 simplecontrol.top
" all " 00! u: ( =8%input<%userfirstline ) ^gambit ( ~introductions ) `0gy u: ( ) $$currenttopic = %topic ^if 00m( %response == 0 ) 00I{ ^nofail ( TOPIC ^rejoinder ( ) ) } 004 ^if 00D( %length == 0 and %response == 0 ) 00U{ ^nofail ( TOPIC ^gambit ( $$currenttopic ) ) } 004 ^if 00m( %response == 0 ) 00V{ ^nofail ( TOPIC ^respond ( $$currenttopic ) ) } 004 ^if 00m( %response == 0 ) 02r{ @8 = ^keywordtopics ( ) ^loop ( -1 ) 01S { $$topic = ^first ( @8subject ) ^nofail ( TOPIC ^respond ( $$topic ) ) ^if 00m( %response != 0 ) 00p{ ^end ( RULE ) } 004 } } 004 ^if 00F( %outputrejoinder or %lastquestion ) 00q{ ^end ( TOPIC ) } 004 ^if 00R( %response == 0 and ^marked ( $$currenttopic ) ) 00U{ ^nofail ( TOPIC ^gambit ( $$currenttopic ) ) } 004 ^if 00m( %response == 0 ) 02q{ @8 = ^keywordtopics ( ) ^loop ( -1 ) 01R { $$topic = ^first ( @8subject ) ^nofail ( TOPIC ^gambit ( $$topic ) ) ^if 00m( %response != 0 ) 00p{ ^end ( RULE ) } 004 } } 004 ^if 00m( %response == 0 ) 00U{ ^nofail ( TOPIC ^gambit ( $$currenttopic ) ) } 004 ^if 00m( %response == 0 ) 02o{ @8 = ^gambittopics ( ) ^loop ( -1 ) 01Q { $$topic = ^pick ( @8subject ) ^nofail ( TOPIC ^gambit ( $$topic ) ) ^if 00m( %response != 0 ) 00p{ ^end ( RULE ) } 004 } } 004 ^if 00m( %response == 0 ) 00N{ ^repeat ( ) I don't know what to say. } 004 `000 
TOPIC: ~defineworld 0x0 -1013304492 1 0 393 stockpile.top
" all " 054 u: ( ) ^connect_by_sea ( location0 location1 ) ^connect_by_sea ( location0 location2 ) ^connect_by_land ( location1 location2 ) ^addresource ( location0 stone 1 ) ^addresource ( location1 stone 5 ) ^addresource ( location2 stone 3 ) ^create_vehicle ( ship1 location0 ) ^create_vehicle ( cart1 location2 ) ^load_cargo ( cart1 * stone 1 ) ^create_vehicle ( train1 location2 ) `000 
TOPIC: ~introductions 0x3 -1340945599 5 1 1135 simpletopic.top
" all " 04M t: ( =8%input<%userfirstline ) ^keep ( ) Legal commands are: \n "pile where  what quantity" - move stuff around in world \n "place where what quantity" - add stuff to world \n "show" - describe state of world \n ^"    where can be:  location0 location1 location2 \n" ^"    what can be:  stone wood \n" ^respond ( ~defineworld ) ^showworld ( ) `00A u: ( < show > ) ^showworld ( ) `01T u: ( < place _~places _~resources _~number > ) '_1 placed. ^replace_resource ( '_1 '_0 _2 ) ^make_reality ( ) ^showworld ( ) `04u u: ( < pile _~places _~resources _~number > ) @10 = null ^if 00v( ^acquire ( '_0 '_1 _2 ) ) 02A{ Mission accomplished. \n ^make_reality ( ) ^loop ( -1 ) 01t { $$f = ^first ( @10f ) \( ^field ( $$f subject ) ^field ( $$f verb ) ^field ( $$f Object ) \) \n } ^showworld ( ) } 00P else ( 1 ) 00z { Unable to achieve goal. } 004 `03Q u: ( _* ) Illegal command: '_0 \n "pile where  what quantity" - move stuff around in world \n "place where what quantity" - add stuff to world \n "show" - describe state of world \n ^"    what can be:  stone wood \n" ^"    where can be:  location0 location1 location2 \n" `000 
